---
title: å®¢æˆ·ç«¯å¼€å‘ï¼ˆä¸€ï¼‰| uni-app é¡¹ç›®ç¯å¢ƒå¼€å‘
date: 2023-08-27
author: Kevin å´å˜‰æ–‡
tag:
- webfront
category:
- çŸ¥è¯†ç¬”è®°
---

::: tip

æ„Ÿè°¢é»‘é©¬ç¨‹åºå‘˜æä¾›çš„å®Œå–„èµ„æ–™ã€‚è¯¥æ–‡ç« åŸºäºé»‘é©¬ç¨‹åºå‘˜æ•™æåšäº†å°‘é‡æ”¹åŠ¨ã€‚

:::

*uni*-*app* æ˜¯ä¸€ä¸ªä½¿ç”¨ Vue.js å¼€å‘æ‰€æœ‰å‰ç«¯åº”ç”¨çš„æ¡†æ¶ï¼Œå¼€å‘è€…ç¼–å†™ä¸€å¥—ä»£ç ï¼Œå¯å‘å¸ƒåˆ° iOSã€Androidã€Webï¼ˆå“åº”å¼ï¼‰ã€ä»¥åŠå„ç§å°ç¨‹åºã€å¿«åº”ç”¨ç­‰å¤šä¸ªå¹³å°ã€‚

> æœ¬æ¥ä»¥ä¸ºï¼Œå¼€å‘æ‰‹æœº appï¼Œæˆ–è€…å¾®ä¿¡å°ç¨‹åºï¼Œè¿˜éœ€è¦å¦å¤–å­¦æŠ€æœ¯ã€‚æœ‰äº† uni-app åï¼Œå¾ˆå¼€å¿ƒï¼Œå‰å‡ å¹´å­¦çš„ VUEï¼Œç°åœ¨ç”¨å¾—ä¸Šäº†ï¼Œè¿™æ˜¯åœ¨æš—ç¤ºç€åˆ›ä¸šé¡ºåˆ©å˜›å“ˆå“ˆå“ˆ

## åˆ›å»º uni-app é¡¹ç›®æ–¹å¼

 **uni-app æ”¯æŒä¸¤ç§æ–¹å¼åˆ›å»ºé¡¹ç›®ï¼š** 

1. é€šè¿‡ HBuilderX åˆ›å»º

2. é€šè¿‡å‘½ä»¤è¡Œåˆ›å»ºï¼ˆæ¨èï¼‰

## HBuilderX åˆ›å»º uni-app é¡¹ç›®

### åˆ›å»ºæ­¥éª¤

 **1.ä¸‹è½½å®‰è£… HbuilderX ç¼–è¾‘å™¨** 

åœ¨å®˜ç½‘ https://www.dcloud.io/ ä¸‹è½½å¯¹åº”ç¼–è¾‘å™¨ã€‚

 **2.é€šè¿‡ HbuilderX åˆ›å»º uni-app vue3 é¡¹ç›®** 

![é€šè¿‡ HbuilderX åˆ›å»º uni-app vue3 é¡¹ç›®](/assets/img/uniapp/image-20230827194022024.png)

 **3.å®‰è£… uni-app vue3 ç¼–è¯‘å™¨æ’ä»¶** 

![å®‰è£… uni-app vue3 ç¼–è¯‘å™¨æ’ä»¶](/assets/img/uniapp/uniapp_picture_3.png)

 **4.ç¼–è¯‘æˆå¾®ä¿¡å°ç¨‹åºç«¯ä»£ç ** 

![ç¼–è¯‘æˆå¾®ä¿¡å°ç¨‹åºç«¯ä»£ç ](/assets/img/uniapp/uniapp_picture_4.png)

 **5.å¼€å¯æœåŠ¡ç«¯å£** 

å¦‚æœé‡åˆ°æ‰“å¼€å¾®ä¿¡å°ç¨‹åºå¼€å‘å·¥å…·ï¼Œåœ¨è®¾ç½®ï¼Œå®‰å…¨ä¸‹ï¼Œå°†æœåŠ¡ç«¯å£æ‰“å¼€ã€‚

![å¼€å¯æœåŠ¡ç«¯å£](/assets/img/uniapp/uniapp_picture_5.png)

å¼€å¯ç¼–è¯‘æˆå°ç¨‹åºä»£ç ï¼Œå¯ä»¥åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸Šçœ‹åˆ°è½¬æ¢ä¹‹åçš„ä»£ç ã€‚åœ¨ Hbuildex ä¸Šè¿›è¡Œä¿®æ”¹ï¼Œå¹¶ä¿å­˜åï¼Œå¯ä»¥éšæ—¶åŒæ­¥åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸Šã€‚ **å°æŠ€å·§åˆ†äº«ï¼šæ¨¡æ‹Ÿå™¨çª—å£åˆ†ç¦»å’Œç½®é¡¶** 

![æ¨¡æ‹Ÿå™¨çª—å£åˆ†ç¦»å’Œç½®é¡¶](/assets/img/uniapp/uniapp_picture_6.png)

 **Hbuildex å’Œ å¾®ä¿¡å¼€å‘è€…å·¥å…· å…³ç³»** 

![Hbuildex å’Œ å¾®ä¿¡å¼€å‘è€…å·¥å…· å…³ç³»](/assets/img/uniapp/uniapp_picture_7.png)

::: tip

 **Hbuildex**  å’Œ  **uni-app**  éƒ½å±äº [DCloud](https://dcloud.io) å…¬å¸çš„äº§å“ã€‚

:::

## pages.json å’Œ tabBar æ¡ˆä¾‹

### ç›®å½•ç»“æ„

æˆ‘ä»¬å…ˆæ¥è®¤è¯† uni-app é¡¹ç›®çš„ç›®å½•ç»“æ„ã€‚

```shell
â”œâ”€pages            ä¸šåŠ¡é¡µé¢æ–‡ä»¶å­˜æ”¾çš„ç›®å½•
â”‚  â””â”€index
â”‚     â””â”€index.vue  index é¡µé¢
â”œâ”€static           å­˜æ”¾åº”ç”¨å¼•ç”¨çš„æœ¬åœ°é™æ€èµ„æºçš„ç›®å½•(æ³¨æ„ï¼šé™æ€èµ„æºåªèƒ½å­˜æ”¾äºæ­¤)
â”œâ”€unpackage        éå·¥ç¨‹ä»£ç ï¼Œä¸€èˆ¬å­˜æ”¾è¿è¡Œæˆ–å‘è¡Œçš„ç¼–è¯‘ç»“æœ
â”œâ”€index.html       H5 ç«¯é¡µé¢
â”œâ”€main.js          Vue åˆå§‹åŒ–å…¥å£æ–‡ä»¶
â”œâ”€App.vue          é…ç½® App å…¨å±€æ ·å¼ã€ç›‘å¬åº”ç”¨ç”Ÿå‘½å‘¨æœŸ
â”œâ”€pages.json        **é…ç½®é¡µé¢è·¯ç”±ã€å¯¼èˆªæ ã€tabBar ç­‰é¡µé¢ç±»ä¿¡æ¯** 
â”œâ”€manifest.json     **é…ç½® appid** ã€åº”ç”¨åç§°ã€logoã€ç‰ˆæœ¬ç­‰æ‰“åŒ…ä¿¡æ¯
â””â”€uni.scss         uni-app å†…ç½®çš„å¸¸ç”¨æ ·å¼å˜é‡
```

### è§£è¯» pages.json

ç”¨äºé…ç½®é¡µé¢è·¯ç”±ã€å¯¼èˆªæ ã€tabBar ç­‰é¡µé¢ç±»ä¿¡æ¯

### æ¡ˆä¾‹ç»ƒä¹ 

 **æ•ˆæœé¢„è§ˆ** 
![æ¡ˆä¾‹ç»ƒä¹ ](/assets/img/uniapp/uniapp_case_1.png)

 **å‚è€ƒä»£ç ** 

::: tip

åœ¨å®šä¹‰ page çš„æ—¶å€™ï¼Œæœ€åé¿å…ä½¿ç”¨ `index.vue` ä½œä¸ºé¡µé¢æ–‡ä»¶åç§°ã€‚å‡å°‘å°ç¨‹åºç¼–è¯‘æ—¶å¯èƒ½å‡ºç°çš„é—®é¢˜ã€‚

:::

```json
{
  // é¡µé¢è·¯ç”±
  "pages": [
    {
      "path": "pages/index/index",
      // é¡µé¢æ ·å¼é…ç½®
      "style": {
        "navigationBarTitleText": "é¦–é¡µ"
      }
    },
    {
      "path": "pages/my/my",
      "style": {
        "navigationBarTitleText": "æˆ‘çš„"
      }
    }
  ],
  // å…¨å±€æ ·å¼é…ç½®
  "globalStyle": {
    "navigationBarTextStyle": "white",
    "navigationBarTitleText": "uni-app",
    "navigationBarBackgroundColor": "#27BA9B",
    "backgroundColor": "#F8F8F8"
  },
  // tabBar é…ç½®
  "tabBar": {
    "selectedColor": "#27BA9B",
    "list": [
      {
        "pagePath": "pages/index/index",
        "text": "é¦–é¡µ",
        "iconPath": "static/tabs/home_default.png",
        "selectedIconPath": "static/tabs/home_selected.png"
      },
      {
        "pagePath": "pages/my/my",
        "text": "æˆ‘çš„",
        "iconPath": "static/tabs/user_default.png",
        "selectedIconPath": "static/tabs/user_selected.png"
      }
    ]
  }
}
```

## uni-app å’ŒåŸç”Ÿå°ç¨‹åºå¼€å‘åŒºåˆ«

### ä¸»è¦åŒºåˆ«

uni-app é¡¹ç›®æ¯ä¸ªé¡µé¢æ˜¯ä¸€ä¸ª `.vue` æ–‡ä»¶ï¼Œæ•°æ®ç»‘å®šåŠäº‹ä»¶å¤„ç†åŒ `Vue.js` è§„èŒƒï¼š

1. å±æ€§ç»‘å®š `src="{ { url }}"` å‡çº§æˆ `:src="url"`

2. äº‹ä»¶ç»‘å®š `bindtap="eventName"` å‡çº§æˆ `@tap="eventName"`ï¼Œ **æ”¯æŒï¼ˆï¼‰ä¼ å‚** 

3. æ”¯æŒ Vue å¸¸ç”¨ **æŒ‡ä»¤**  `v-for`ã€`v-if`ã€`v-show`ã€`v-model` ç­‰

### å…¶ä»–åŒºåˆ«è¡¥å……

1. è°ƒç”¨æ¥å£èƒ½åŠ›ï¼Œ **å»ºè®®** å‰ç¼€ `wx` æ›¿æ¢ä¸º `uni` ï¼Œå…»æˆå¥½ä¹ æƒ¯ï¼Œè¿™æ ·æ”¯æŒå¤šç«¯å¼€å‘ã€‚[uni_app api](https://uniapp.dcloud.net.cn/api/) æ–‡æ¡£ã€‚
2. `<style></style>` æ ·å¼ä¸éœ€è¦å†™ `scoped`
3. ç”Ÿå‘½å‘¨æœŸåˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼šåº”ç”¨ç”Ÿå‘½å‘¨æœŸ(å°ç¨‹åº)ï¼Œé¡µé¢ç”Ÿå‘½å‘¨æœŸ(å°ç¨‹åº)ï¼Œç»„ä»¶ç”Ÿå‘½å‘¨æœŸ(Vue)

### æ¡ˆä¾‹ç»ƒä¹ 

 **æ•ˆæœé¢„è§ˆ** 
![æ¡ˆä¾‹ç»ƒä¹ ](/assets/img/uniapp/uniapp_case_2.png)

 **ä¸»è¦åŠŸèƒ½** 

1.  æ»‘åŠ¨è½®æ’­å›¾
2.  ç‚¹å‡»å¤§å›¾é¢„è§ˆ

 **å‚è€ƒä»£ç ** 

```vue
<template>
  <swiper class="banner" indicator-dots circular :autoplay="false">
    <swiper-item v-for="item in pictures" :key="item.id">
      <image @tap="onPreviewImage(item.url)" :src="item.url"></image>
    </swiper-item>
  </swiper>
</template>

<script>
export default {
  data() {
    return {
      // è½®æ’­å›¾æ•°æ®
      pictures: [
        {
          id: '1',
          url: 'https://pcapi-xiaotuxian-front-devtest.itheima.net/miniapp/uploads/goods_preview_1.jpg',
        },
        {
          id: '2',
          url: 'https://pcapi-xiaotuxian-front-devtest.itheima.net/miniapp/uploads/goods_preview_2.jpg',
        },
        {
          id: '3',
          url: 'https://pcapi-xiaotuxian-front-devtest.itheima.net/miniapp/uploads/goods_preview_3.jpg',
        },
        {
          id: '4',
          url: 'https://pcapi-xiaotuxian-front-devtest.itheima.net/miniapp/uploads/goods_preview_4.jpg',
        },
        {
          id: '5',
          url: 'https://pcapi-xiaotuxian-front-devtest.itheima.net/miniapp/uploads/goods_preview_5.jpg',
        },
      ],
    }
  },
  methods: {
    onPreviewImage(url) {
      // å¤§å›¾é¢„è§ˆ
      uni.previewImage({
        urls: this.pictures.map((v) => v.url),
        current: url,
      })
    },
  },
}
</script>

<style>
.banner,
.banner image {
  width: 750rpx;
  height: 750rpx;
}
</style>
```

## å‘½ä»¤è¡Œåˆ›å»º uni-app é¡¹ç›®

 **ä¼˜åŠ¿** 

é€šè¿‡å‘½ä»¤è¡Œåˆ›å»º uni-app é¡¹ç›®ï¼Œ **ä¸å¿…ä¾èµ– HBuilderX** ï¼ŒTypeScript ç±»å‹æ”¯æŒå‹å¥½ã€‚

 **å‘½ä»¤è¡Œåˆ›å»º**   **uni-app**   **é¡¹ç›®ï¼š** ï¼ˆéœ€è¦å…ˆå®‰è£…å¥½ vue-cliï¼Œè¯·å‚è€ƒ vue ç›¸å…³æ•™ç¨‹ï¼‰

vue3 + ts ç‰ˆ

```shell
# npx degit dcloudio/uni-preset-vue#vite-ts é¡¹ç›®åç§°
npx degit dcloudio/uni-preset-vue#vite-ts kevin_app
```

åˆ›å»ºå…¶ä»–ç‰ˆæœ¬å¯æŸ¥çœ‹ï¼š[uni-app å®˜ç½‘](https://uniapp.dcloud.net.cn/quickstart-cli.html)

::: tip

å¦‚æœé‡åˆ°ç½‘ç»œé—®é¢˜ï¼Œå°è¯•

- åœ¨è®¾å¤‡æˆ–è·¯ç”±å™¨çš„ç½‘ç»œè®¾ç½®ä¸­å¢åŠ  DNSï¼ˆå¦‚ï¼š8.8.8.8ï¼‰
- åœ¨è®¾å¤‡ä¸­å¢åŠ å›ºå®šçš„ hostsï¼ˆå¦‚ï¼š140.82.113.4 github.comï¼‰

:::



### ç¼–è¯‘å’Œè¿è¡Œ uni-app é¡¹ç›®

å‘å¸ƒè¿è¡Œ uniapp ä½¿ç”¨

```bash
npm run dev:%PLATFORM%
npm run build:%PLATFORM%
```

`%PLATFORM%` å¯æ›¿æ¢ä¸º `mp-weixin`, `h5`, `app-plus` ç­‰åº”ç”¨ã€‚ä»¥å¾®ä¿¡å°ç¨‹åºä¸ºä¾‹ï¼š

1. å®‰è£…ä¾èµ– `npm install`
2. ç¼–è¯‘æˆå¾®ä¿¡å°ç¨‹åº `npm dev:mp-weixin`

3. è¿è¡Œåï¼Œç”Ÿæˆ `dist/dev/mp-weixin` æ–‡ä»¶å¤¹ã€‚æ‰“å¼€å¾®ä¿¡å°ç¨‹åºï¼Œå¯¼å…¥å¾®ä¿¡å¼€å‘è€…å·¥å…·

::: tip

åœ¨ `manifest.json` æ–‡ä»¶æ·»åŠ å°ç¨‹åº `appid` æ–¹ä¾¿çœŸæœºé¢„è§ˆã€‚

å¦‚æœä½¿ç”¨ windows + WSL2 å¼€å‘ï¼Œå¯ä»¥å°† mp-weixin æ–‡ä»¶å¤¹è½¯è¿æ¥åˆ° windows æœ¬åœ°ç›®å½•ä¸‹ï¼Œå¦‚ï¼š

```bash
 ln -s /mnt/d/å°ç¨‹åºé¡¹ç›®/mp-weixin ./dist/dev/mp-weixin
```

å¦‚æœç›´æ¥ç”¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ï¼Œå¯¼å…¥ wsl å†…çš„ dist æ–‡ä»¶ï¼Œä¼šå‡ºç°æŠ¥é”™ã€‚

:::

## ä¸ºä»€ä¹ˆä½¿ç”¨ VS Codeï¼Ÿ

## ç”¨ VS Code å¼€å‘ uni-app é¡¹ç›®

### ä¸ºä»€ä¹ˆé€‰æ‹© VS Codeï¼Ÿ

- VS Code å¯¹  **TS ç±»å‹æ”¯æŒå‹å¥½** ï¼Œå‰ç«¯å¼€å‘è€… **ç†Ÿæ‚‰çš„ç¼–è¾‘å™¨**  ğŸ‘
- HbuilderX å¯¹ TS ç±»å‹æ”¯æŒæš‚ä¸å®Œå–„ï¼ŒæœŸå¾…å®˜æ–¹å®Œå–„ ğŸ‘€

### ç”¨ VS Code å¼€å‘é…ç½®

- å®‰è£… uni-app æ’ä»¶
  -  **uni-create-view**  ï¼šå¿«é€Ÿåˆ›å»º uni-app é¡µé¢ï¼šå³é”® pageï¼Œç‚¹å‡» new uni-app page
  -  **uni-helper uni-app**  ï¼šä»£ç æç¤ºï¼›è‡ªåŠ¨è¡¥å…¨ç­‰
  -  **uniapp å°ç¨‹åºæ‰©å±•**  ï¼šé¼ æ ‡æ‚¬åœæŸ¥æ–‡æ¡£
- TS ç±»å‹æ ¡éªŒ
  - å®‰è£…ç±»å‹å£°æ˜æ–‡ä»¶ `pnpm i -D @types/wechat-miniprogram @uni-helper/uni-app-types`
  - é…ç½® `tsconfig.json`
- JSON æ³¨é‡Šé—®é¢˜
  - è®¾ç½®æ–‡ä»¶å…³è”ï¼ŒæŠŠ `manifest.json` å’Œ `pages.json` è®¾ç½®ä¸º `jsonc`

```diff
// tsconfig.json
{
  "extends": "@vue/tsconfig/tsconfig.json",
  "compilerOptions": {
    "sourceMap": true,
    "baseUrl": ".",
    "paths": {
      "@/*": ["./src/*"]
    },
    "lib": ["esnext", "dom"],
    "types": [
      "@dcloudio/types",
+      "@types/wechat-miniprogram",
+      "@uni-helper/uni-app-types"
    ]
  },
  "include": ["src/**/*.ts", "src/**/*.d.ts", "src/**/*.tsx", "src/**/*.vue"]
}
```

æ³¨æ„ï¼šåŸé…ç½® `experimentalRuntimeMode` ç°æ— éœ€æ·»åŠ ã€‚

## å¼€å‘å·¥å…·å›é¡¾

é€‰æ‹©è‡ªå·±ä¹ æƒ¯çš„ç¼–è¾‘å™¨å¼€å‘ uni-app é¡¹ç›®å³å¯ã€‚

 **VS Code å’Œ å¾®ä¿¡å¼€å‘è€…å·¥å…· å…³ç³»** 
![VS Code å’Œ å¾®ä¿¡å¼€å‘è€…å·¥å…· å…³ç³»](/assets/img/uniapp/uniapp_picture_8.png)

 **HbuilderX å’Œ å¾®ä¿¡å¼€å‘è€…å·¥å…· å…³ç³»** 
![HbuilderX å’Œ å¾®ä¿¡å¼€å‘è€…å·¥å…· å…³ç³»](/assets/img/uniapp/uniapp_picture_7.png)

## ç”¨ VS Code å¼€å‘è¯¾åç»ƒä¹ 

ä½¿ç”¨ `VS Code` ç¼–è¾‘å™¨å†™ä»£ç ï¼Œå®ç° tabBar æ¡ˆä¾‹ + è½®æ’­å›¾æ¡ˆä¾‹ã€‚

æ¸©é¦¨æç¤ºï¼š`VS Code` å¯é€šè¿‡å¿«æ·é”® `Ctrl + i` å”¤èµ·ä»£ç æç¤ºã€‚